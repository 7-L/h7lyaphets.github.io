<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>数据库编程入门(一)-PL/SQL快速入门 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="1.什么是PL/SQL1.1 PL/SQL含义Procedure Language / SQL 是Oracle对过程化语言的扩展，针对CRUD的过程处理语句，使得SQL语句具有过程处理能力。 1.2 为什么要学习PL/SQL 比如要给员工按职位不同增加不同的工资，虽然可以用java等编程语言操作数据库进行实现，但是效率远不如使用Oralce原生的变成语言实现。 为了学习存储过程和触发器打基础 Pr">
<meta name="keywords" content="Oracle">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库编程入门(一)-PL&#x2F;SQL快速入门">
<meta property="og:url" content="http://yoursite.com/2017/03/10/Oracle/PLSQL快速入门/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="1.什么是PL/SQL1.1 PL/SQL含义Procedure Language / SQL 是Oracle对过程化语言的扩展，针对CRUD的过程处理语句，使得SQL语句具有过程处理能力。 1.2 为什么要学习PL/SQL 比如要给员工按职位不同增加不同的工资，虽然可以用java等编程语言操作数据库进行实现，但是效率远不如使用Oralce原生的变成语言实现。 为了学习存储过程和触发器打基础 Pr">
<meta property="og:image" content="http://img.blog.csdn.net/20161122121857763">
<meta property="og:image" content="http://img.blog.csdn.net/20161122122032788">
<meta property="og:image" content="http://img.blog.csdn.net/20161122122755979">
<meta property="og:image" content="http://img.blog.csdn.net/20161122123029010">
<meta property="og:image" content="http://img.blog.csdn.net/20161122123038651">
<meta property="og:image" content="http://img.blog.csdn.net/20161122123120640">
<meta property="og:image" content="http://img.blog.csdn.net/20161122123444426">
<meta property="og:image" content="http://img.blog.csdn.net/20161122123509176">
<meta property="og:image" content="http://img.blog.csdn.net/20161122123525200">
<meta property="og:image" content="http://img.blog.csdn.net/20161122123853478">
<meta property="og:image" content="http://img.blog.csdn.net/20161122123928026">
<meta property="og:image" content="http://img.blog.csdn.net/20161122124011608">
<meta property="og:image" content="http://img.blog.csdn.net/20161122124151155">
<meta property="og:updated_time" content="2017-03-09T16:49:34.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="数据库编程入门(一)-PL&#x2F;SQL快速入门">
<meta name="twitter:description" content="1.什么是PL/SQL1.1 PL/SQL含义Procedure Language / SQL 是Oracle对过程化语言的扩展，针对CRUD的过程处理语句，使得SQL语句具有过程处理能力。 1.2 为什么要学习PL/SQL 比如要给员工按职位不同增加不同的工资，虽然可以用java等编程语言操作数据库进行实现，但是效率远不如使用Oralce原生的变成语言实现。 为了学习存储过程和触发器打基础 Pr">
<meta name="twitter:image" content="http://img.blog.csdn.net/20161122121857763">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Oracle/PLSQL快速入门" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/10/Oracle/PLSQL快速入门/" class="article-date">
  <time datetime="2017-03-09T16:47:43.000Z" itemprop="datePublished">2017-03-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      数据库编程入门(一)-PL/SQL快速入门
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-什么是PL-SQL"><a href="#1-什么是PL-SQL" class="headerlink" title="1.什么是PL/SQL"></a>1.什么是PL/SQL</h2><h3 id="1-1-PL-SQL含义"><a href="#1-1-PL-SQL含义" class="headerlink" title="1.1 PL/SQL含义"></a>1.1 PL/SQL含义</h3><p>Procedure Language / SQL 是Oracle对过程化语言的扩展，针对CRUD的过程处理语句，使得SQL语句具有过程处理能力。</p>
<h3 id="1-2-为什么要学习PL-SQL"><a href="#1-2-为什么要学习PL-SQL" class="headerlink" title="1.2 为什么要学习PL/SQL"></a>1.2 为什么要学习PL/SQL</h3><ul>
<li>比如要给员工按职位不同增加不同的工资，虽然可以用java等编程语言操作数据库进行实现，但是效率远不如使用Oralce原生的变成语言实现。</li>
<li>为了学习存储过程和触发器打基础</li>
<li>Procedure Language / SQL 是Oracle对过程化语言的扩展，针对CRUD的过程处理语句，使得SQL语句具有过程处理能力。</li>
</ul>
<a id="more"></a>
<h2 id="2-最简单的PL-SQL程序"><a href="#2-最简单的PL-SQL程序" class="headerlink" title="2.最简单的PL/SQL程序"></a>2.最简单的PL/SQL程序</h2><p>我用的是Oracle11g,客户端连接工具是SQLDeveloper。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">set</span> serveroutput <span class="keyword">on</span>; — 打开输出开关(默认是关闭的)</div><div class="line"><span class="keyword">declare</span> — 说明部分 (变量，光标，例外)</div><div class="line"><span class="keyword">begin</span></div><div class="line">   <span class="comment">-- 程序体</span></div><div class="line">    DBMS_OUTPUT.PUT_LINE(<span class="string">'Hello World'</span>);</div><div class="line"><span class="keyword">end</span>;</div><div class="line">/ <span class="comment">-- 表示此段程序执行结束</span></div></pre></td></tr></table></figure>
<h2 id="3-使用desc查看表结构、视图结构、包结构"><a href="#3-使用desc查看表结构、视图结构、包结构" class="headerlink" title="3.使用desc查看表结构、视图结构、包结构"></a>3.使用desc查看表结构、视图结构、包结构</h2><p><img src="http://img.blog.csdn.net/20161122121857763" alt="查看如何使用DBMS_OUTPUT.PUTLINE()"></p>
<h2 id="4-基本数据类型"><a href="#4-基本数据类型" class="headerlink" title="4.基本数据类型"></a>4.基本数据类型</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">char,varchar2,date,number,boolean,long</div><div class="line"></div><div class="line"><span class="keyword">declare</span></div><div class="line">pnumber <span class="built_in">number</span>(<span class="number">10</span>,<span class="number">2</span>);</div><div class="line">pname varchar2(200);</div><div class="line">pdate date;</div><div class="line"><span class="keyword">begin</span></div><div class="line">  pnumber := <span class="number">1</span>;</div><div class="line">  DBMS_OUTPUT.PUT_LINE(pnumber);</div><div class="line">  pname := 'NikoBelic';</div><div class="line">  DBMS_OUTPUT.PUT_LINE(pname);</div><div class="line">  pdate := sysdate;</div><div class="line">  DBMS_OUTPUT.PUT_LINE(pdate);</div><div class="line">  pdate := pdate + 1;</div><div class="line">  DBMS_OUTPUT.PUT_LINE(pdate);</div><div class="line"><span class="keyword">end</span>;</div><div class="line">/</div></pre></td></tr></table></figure>
<p><img src="http://img.blog.csdn.net/20161122122032788" alt="这里写图片描述"></p>
<h2 id="5-if-else-then的使用"><a href="#5-if-else-then的使用" class="headerlink" title="5.if else then的使用"></a>5.if else then的使用</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">  判断用户从键盘输入的数字</div><div class="line">  1.如何使用if语句</div><div class="line">  2.接收一个键盘输入（字符串）</div><div class="line">*/</div><div class="line"></div><div class="line"><span class="comment">-- 接受一个键盘输入</span></div><div class="line"><span class="comment">-- num:地址值，含义是：在改地址上保存了输入的值</span></div><div class="line">accept num PROMPT '请输入一个数字'</div><div class="line"></div><div class="line"><span class="keyword">declare</span></div><div class="line">  <span class="comment">-- 定义变量保存用户输入的数字</span></div><div class="line">  pnum <span class="built_in">number</span> := &amp;<span class="keyword">num</span>;</div><div class="line"><span class="keyword">begin</span></div><div class="line">  <span class="keyword">if</span> pnum = <span class="number">0</span> <span class="keyword">then</span> dbms_output.put_line(<span class="string">'您输入的是0'</span>);</div><div class="line">    elsif pnum = 1 then dbms_output.put_line('您输入的是1');</div><div class="line">    elsif pnum = 2 then dbms_output.put_line('您输入的是2');</div><div class="line">    else dbms_output.put_line('其他数字');</div><div class="line">  <span class="keyword">end</span> <span class="keyword">if</span>;</div><div class="line"><span class="keyword">end</span>;</div><div class="line">/</div></pre></td></tr></table></figure>
<h2 id="6-循环的使用"><a href="#6-循环的使用" class="headerlink" title="6.循环的使用"></a>6.循环的使用</h2><h3 id="6-1-while-loop-循环"><a href="#6-1-while-loop-循环" class="headerlink" title="6.1 while loop 循环"></a>6.1 while loop 循环</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">declare</span></div><div class="line"><span class="keyword">num</span> <span class="built_in">number</span> := <span class="number">1</span>;</div><div class="line"><span class="keyword">begin</span></div><div class="line">  <span class="keyword">while</span> <span class="keyword">num</span> &lt;= <span class="number">10</span> <span class="keyword">loop</span></div><div class="line">    dbms_output.put_line(<span class="keyword">num</span>);</div><div class="line">    num := num + 1;</div><div class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</div><div class="line"><span class="keyword">end</span>;</div></pre></td></tr></table></figure>
<h3 id="6-2-loop循环"><a href="#6-2-loop循环" class="headerlink" title="6.2 loop循环"></a>6.2 loop循环</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">declare</span></div><div class="line">  <span class="keyword">num</span> <span class="built_in">number</span> := <span class="number">1</span>;</div><div class="line"><span class="keyword">begin</span></div><div class="line">  <span class="keyword">loop</span></div><div class="line">    <span class="keyword">exit</span> <span class="keyword">when</span> <span class="keyword">num</span> &gt; <span class="number">10</span>;</div><div class="line">    dbms_output.put_line(num);</div><div class="line">    num := num + 1;</div><div class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</div><div class="line"><span class="keyword">end</span>;</div></pre></td></tr></table></figure>
<h3 id="6-3-for-loop循环"><a href="#6-3-for-loop循环" class="headerlink" title="6.3 for loop循环"></a>6.3 for loop循环</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">declare</span></div><div class="line">  <span class="keyword">num</span> <span class="built_in">number</span>;</div><div class="line"></div><div class="line"><span class="keyword">begin</span></div><div class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1.</span><span class="number">.10</span> <span class="keyword">loop</span></div><div class="line">    dbms_output.put_line(i);</div><div class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</div><div class="line"><span class="keyword">end</span>;</div></pre></td></tr></table></figure>
<h2 id="7-游标-光标"><a href="#7-游标-光标" class="headerlink" title="7.游标/光标"></a>7.游标/光标</h2><h3 id="7-1什么是游标"><a href="#7-1什么是游标" class="headerlink" title="7.1什么是游标"></a>7.1什么是游标</h3><p>游标可以理解为一个指向数据集合的指针<br>cursor c_user is select * from tb_user;  – c_user就是指向user表中所有数据的集合</p>
<h3 id="7-2游标的属性"><a href="#7-2游标的属性" class="headerlink" title="7.2游标的属性"></a>7.2游标的属性</h3><ul>
<li>found: 光标有值</li>
<li>notfound:光标无</li>
<li>isopen:光标是否打开</li>
<li>rowcount:光标影响的行数</li>
</ul>
<h3 id="7-3查看和和修改游标限制"><a href="#7-3查看和和修改游标限制" class="headerlink" title="7.3查看和和修改游标限制"></a>7.3查看和和修改游标限制</h3><p>游标数的限制：默认情况下，oracle数据库只允许在同一个会话中打开300个游标。<br>查看和修改游标限制数:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sqlplus sys/password@192.168.1.100:1521/orcl as sysdba;</div><div class="line">show user;</div><div class="line">show parameter cursor;</div></pre></td></tr></table></figure>
<p><img src="http://img.blog.csdn.net/20161122122755979" alt="这里写图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">alter system set open_cursors=400 scope=both;</div><div class="line">-- scope的取值有三个:</div><div class="line">     both           配置文件和当前实例都更改 </div><div class="line">     memory     只更改当前实例，不更改配置文件</div><div class="line">     spfile          只更改参数文件，不更改当前实例，需要重启数据库</div></pre></td></tr></table></figure>
<h3 id="7-4-游标应用示例"><a href="#7-4-游标应用示例" class="headerlink" title="7.4 游标应用示例"></a>7.4 游标应用示例</h3><p>示例1</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">declare</span></div><div class="line">  <span class="comment">-- 定义一个光标</span></div><div class="line">  <span class="keyword">cursor</span> c_user <span class="keyword">is</span> <span class="keyword">select</span> <span class="keyword">name</span>,salary <span class="keyword">from</span> tb_user;</div><div class="line">  <span class="comment">-- 为光标定义对应的变量</span></div><div class="line">  uname TB_USER.NAME%type;</div><div class="line">  usalary TB_USER.SALARY%type;</div><div class="line">  user tb_user%rowtype;</div><div class="line"><span class="keyword">begin</span></div><div class="line">  <span class="comment">-- 打开光标</span></div><div class="line">  <span class="keyword">open</span> c_user;</div><div class="line">  loop</div><div class="line">    <span class="comment">-- 取一条记录</span></div><div class="line">    fetch c_user into uname,usalary;</div><div class="line">    exit when c_user%notfound; <span class="comment">-- 光标的属性found和notfound</span></div><div class="line">    dbms_output.put_line(uname || '的薪资是' || usalary);</div><div class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</div><div class="line">  <span class="comment">-- 关闭光标</span></div><div class="line">  close c_user;</div><div class="line"><span class="keyword">end</span>;</div><div class="line">/</div></pre></td></tr></table></figure>
<p><img src="http://img.blog.csdn.net/20161122123029010" alt="这里写图片描述"><br>示例2</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">declare</span></div><div class="line">  <span class="comment">-- 定义一个光标</span></div><div class="line">  <span class="keyword">cursor</span> c_user <span class="keyword">is</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_user;</div><div class="line">  <span class="comment">-- 为光标定义对应的变量</span></div><div class="line">  uname TB_USER.NAME%type;</div><div class="line">  usalary TB_USER.SALARY%type;</div><div class="line">  user tb_user%rowtype;</div><div class="line"><span class="keyword">begin</span></div><div class="line">  <span class="comment">-- 打开光标</span></div><div class="line">  <span class="keyword">open</span> c_user;</div><div class="line">  loop</div><div class="line">    <span class="comment">-- 取一条记录</span></div><div class="line">    fetch c_user into user;</div><div class="line">    exit when c_user%notfound; <span class="comment">-- 光标的属性found和notfound</span></div><div class="line">    dbms_output.put_line(user.name || '的薪资是' || user.salary);</div><div class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</div><div class="line">  <span class="comment">-- 关闭光标</span></div><div class="line">  close c_user;</div><div class="line"><span class="keyword">end</span>;</div><div class="line">/</div></pre></td></tr></table></figure>
<p><img src="http://img.blog.csdn.net/20161122123038651" alt="这里写图片描述"></p>
<p>员工涨工资程序</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">DECLARE</span></div><div class="line"><span class="keyword">CURSOR</span> CUR_USER <span class="keyword">IS</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> TB_USER;</div><div class="line">USER TB_USER%ROWTYPE;</div><div class="line"><span class="keyword">BEGIN</span></div><div class="line">  <span class="keyword">OPEN</span> CUR_USER;</div><div class="line">  LOOP</div><div class="line">    FETCH CUR_USER INTO USER;</div><div class="line">    EXIT WHEN CUR_USER%NOTFOUND;</div><div class="line">    IF USER.JOB = 'CEO'</div><div class="line">      THEN <span class="keyword">UPDATE</span> TB_USER <span class="keyword">SET</span> SALARY = SALARY + <span class="number">100000</span> <span class="keyword">WHERE</span> <span class="keyword">NO</span> = USER.NO;</div><div class="line">    ELSIF USER.JOB = 'MANAGER'</div><div class="line">      THEN <span class="keyword">UPDATE</span> TB_USER <span class="keyword">SET</span> SALARY = SALARY + <span class="number">50000</span> <span class="keyword">WHERE</span> <span class="keyword">NO</span> = USER.NO;</div><div class="line">    ELSE</div><div class="line">      <span class="keyword">UPDATE</span> TB_USER <span class="keyword">SET</span> SALARY = SALARY + <span class="number">10000</span> <span class="keyword">WHERE</span> <span class="keyword">NO</span> = USER.NO;</div><div class="line">    <span class="keyword">END</span> <span class="keyword">IF</span>;</div><div class="line">  <span class="keyword">END</span> <span class="keyword">LOOP</span>;</div><div class="line">  CLOSE CUR_USER;</div><div class="line">  <span class="keyword">COMMIT</span>;</div><div class="line"><span class="keyword">END</span>;</div></pre></td></tr></table></figure>
<p>(此图有误，但是结果是正确的，懒得再截图了)<br><img src="http://img.blog.csdn.net/20161122123120640" alt="这里写图片描述"></p>
<h2 id="8-系统例外-异常"><a href="#8-系统例外-异常" class="headerlink" title="8.系统例外(异常)"></a>8.系统例外(异常)</h2><h3 id="8-1-NO-DATA-FOUND"><a href="#8-1-NO-DATA-FOUND" class="headerlink" title="8.1 NO_DATA_FOUND"></a>8.1 NO_DATA_FOUND</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">DECLARE</span></div><div class="line"><span class="keyword">CURSOR</span> CUR_USER(<span class="keyword">NUM</span> <span class="built_in">NUMBER</span>) <span class="keyword">IS</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> TB_USER <span class="keyword">WHERE</span> <span class="keyword">NO</span> &gt; <span class="keyword">NUM</span>;</div><div class="line">USER TB_USER%ROWTYPE;</div><div class="line"></div><div class="line"><span class="keyword">BEGIN</span></div><div class="line"><span class="keyword">OPEN</span> CUR_USER(<span class="number">2</span>);</div><div class="line">LOOP</div><div class="line">  FETCH CUR_USER INTO USER;</div><div class="line">  EXIT WHEN CUR_USER%NOTFOUND;</div><div class="line">  DBMS_OUTPUT.PUT_LINE(USER.NAME);</div><div class="line"><span class="keyword">END</span> <span class="keyword">LOOP</span>;</div><div class="line">CLOSE CUR_USER;</div><div class="line"><span class="keyword">END</span>;</div></pre></td></tr></table></figure>
<p><img src="http://img.blog.csdn.net/20161122123444426" alt="这里写图片描述"></p>
<h3 id="8-2-TOO-MANY-ROWS"><a href="#8-2-TOO-MANY-ROWS" class="headerlink" title="8.2 TOO_MANY_ROWS"></a>8.2 TOO_MANY_ROWS</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">DECLARE</span></div><div class="line">UNAME TB_USER.NAME%<span class="keyword">TYPE</span>;</div><div class="line"></div><div class="line"><span class="keyword">BEGIN</span></div><div class="line">  <span class="keyword">SELECT</span> <span class="keyword">NAME</span> <span class="keyword">INTO</span> UNAME <span class="keyword">FROM</span> TB_USER <span class="keyword">WHERE</span> <span class="keyword">NO</span> &gt; <span class="number">1</span>;</div><div class="line">  EXCEPTION</div><div class="line">    WHEN TOO_MANY_ROWS THEN DBMS_OUTPUT.PUT_LINE('TOO FUCKING MANY ROWS!!!!!!');</div><div class="line"><span class="keyword">END</span>;</div></pre></td></tr></table></figure>
<p><img src="http://img.blog.csdn.net/20161122123509176" alt="这里写图片描述"></p>
<h3 id="8-3-ZERO-DIVIDE"><a href="#8-3-ZERO-DIVIDE" class="headerlink" title="8.3 ZERO_DIVIDE"></a>8.3 ZERO_DIVIDE</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">DECLARE</span></div><div class="line">PNUM <span class="built_in">NUMBER</span>;</div><div class="line"></div><div class="line"><span class="keyword">BEGIN</span></div><div class="line">  PNUM := <span class="number">1</span> / <span class="number">0</span>;</div><div class="line">  EXCEPTION</div><div class="line">    WHEN ZERO_DIVIDE THEN DBMS_OUTPUT.PUT_LINE('FUCKING ZERO CANNOT BE DIVIDE!!!!!');</div><div class="line">                          DBMS_OUTPUT.PUT_LINE('UNDERSTAND????SILLY BOY!!!');</div><div class="line">    WHEN OTHERS THEN DBMS_OUTPUT.PUT_LINE('OTHER EXCEPTIONS...');</div><div class="line"><span class="keyword">END</span>;</div></pre></td></tr></table></figure>
<h3 id="8-4-VALUE-ER"><a href="#8-4-VALUE-ER" class="headerlink" title="8.4 VALUE_ER"></a>8.4 VALUE_ER</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">DECLARE</span></div><div class="line">UNO <span class="built_in">NUMBER</span>;</div><div class="line"></div><div class="line"><span class="keyword">BEGIN</span></div><div class="line">  UNO := <span class="string">'ABC'</span>;</div><div class="line">  EXCEPTION</div><div class="line">    WHEN VALUE_ERROR THEN DBMS_OUTPUT.PUT_LINE('FUCKING DATA TRANSFER ERROR!!!!');</div><div class="line"><span class="keyword">END</span>; 8.5自定义异常</div></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">DECLARE</span></div><div class="line"><span class="keyword">CURSOR</span> CUR_USER <span class="keyword">IS</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> TB_USER <span class="keyword">WHERE</span> <span class="keyword">NO</span> = <span class="number">100</span>;</div><div class="line">USER TB_USER%ROWTYPE;</div><div class="line">USER_NOT_FOUND EXCEPTION;</div><div class="line"><span class="keyword">BEGIN</span></div><div class="line">  <span class="keyword">OPEN</span> CUR_USER;</div><div class="line">    FETCH CUR_USER INTO USER;</div><div class="line">    IF CUR_USER%NOTFOUND THEN RAISE USER_NOT_FOUND;</div><div class="line">    <span class="keyword">END</span> <span class="keyword">IF</span>;</div><div class="line">    EXCEPTION</div><div class="line">      WHEN USER_NOT_FOUND THEN DBMS_OUTPUT.PUT_LINE('THERE IS NO FUCKING USER DATA!!!');</div><div class="line">      WHEN OTHERS THEN DBMS_OUTPUT.PUT_LINE('OTHER EXCEPTION');  </div><div class="line">  CLOSE CUR_USER; <span class="comment">-- 关闭光标这里由于出现了异常所以不会被执行，但是oracle自动启动pomon(process monitor)来自动回收cursor</span></div><div class="line"><span class="keyword">END</span>;</div></pre></td></tr></table></figure>
<p><img src="http://img.blog.csdn.net/20161122123525200" alt="这里写图片描述"></p>
<h2 id="9-案例"><a href="#9-案例" class="headerlink" title="9.案例"></a>9.案例</h2><p>9.1按照入职年份统计员工数量</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">DECLARE</span></div><div class="line"><span class="keyword">CURSOR</span> CUR_DATE <span class="keyword">IS</span> <span class="keyword">SELECT</span> TO_CHAR(HIREDATE,<span class="string">'YYYY'</span>) <span class="keyword">FROM</span> TB_USER;</div><div class="line">UDATE VARCHAR2(4);</div><div class="line">COUNT10 NUMBER := 0;</div><div class="line">COUNT11 NUMBER := 0;</div><div class="line">COUNT12 NUMBER := 0;</div><div class="line">COUNT13 NUMBER := 0;</div><div class="line">COUNT14 NUMBER := 0;</div><div class="line">COUNT15 NUMBER := 0;</div><div class="line">COUNT16 NUMBER := 0;</div><div class="line"></div><div class="line"><span class="keyword">BEGIN</span></div><div class="line">  <span class="keyword">OPEN</span> CUR_DATE;</div><div class="line">    LOOP</div><div class="line">      FETCH CUR_DATE INTO UDATE;</div><div class="line">      EXIT WHEN CUR_DATE%NOTFOUND;</div><div class="line">      IF UDATE = '2016' THEN COUNT16 := COUNT16 + 1;</div><div class="line">      ELSIF UDATE = '2010' THEN COUNT10 := COUNT10 + 1;</div><div class="line">      ELSIF UDATE = '2011' THEN COUNT11 := COUNT11 + 1;</div><div class="line">      ELSIF UDATE = '2012' THEN COUNT12 := COUNT12 + 1;</div><div class="line">      ELSIF UDATE = '2013' THEN COUNT13 := COUNT13 + 1;</div><div class="line">      ELSIF UDATE = '2014' THEN COUNT14 := COUNT14 + 1;</div><div class="line">      ELSIF UDATE = '2015' THEN COUNT15 := COUNT15 + 1;</div><div class="line">      <span class="keyword">END</span> <span class="keyword">IF</span>;</div><div class="line">    <span class="keyword">END</span> <span class="keyword">LOOP</span>;</div><div class="line">  CLOSE CUR_DATE;</div><div class="line">  DBMS_OUTPUT.PUT_LINE('TOTAL:'||(COUNT10 + COUNT11 + COUNT12 + COUNT13 + COUNT14 + COUNT15 + COUNT16));</div><div class="line">  DBMS_OUTPUT.PUT_LINE('2011:'||COUNT11);</div><div class="line"><span class="keyword">END</span>;</div></pre></td></tr></table></figure>
<p><img src="http://img.blog.csdn.net/20161122123853478" alt="这里写图片描述"></p>
<h3 id="9-2员工涨工资"><a href="#9-2员工涨工资" class="headerlink" title="9.2员工涨工资"></a>9.2员工涨工资</h3><p>从薪资最低的员工开始，每人涨10%的工资，要求工资总数不能超过50000</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">DECLARE</div><div class="line">CURSOR CUR_USER IS SELECT NO,SALARY FROM TB_USER ORDER BY SALARY;</div><div class="line">UNO NUMBER;</div><div class="line">USALARY NUMBER;</div><div class="line">TOTALMONEY NUMBER;</div><div class="line">TOTALCOUNT NUMBER := 0;</div><div class="line">INCREAMENTMONEY NUMBER;</div><div class="line">TMP NUMBER;</div><div class="line"></div><div class="line">BEGIN</div><div class="line">  OPEN CUR_USER;</div><div class="line">  SELECT SUM(SALARY) INTO TOTALMONEY FROM TB_USER;</div><div class="line">  LOOP</div><div class="line">    FETCH CUR_USER INTO UNO,USALARY;</div><div class="line">    EXIT WHEN CUR_USER%NOTFOUND;</div><div class="line">    INCREAMENTMONEY := USALARY * 0.1;</div><div class="line">    TMP := TOTALMONEY + INCREAMENTMONEY;</div><div class="line">    EXIT WHEN TMP &gt;= 50000;</div><div class="line">    TOTALMONEY := TOTALMONEY + INCREAMENTMONEY;</div><div class="line">    TOTALCOUNT := TOTALCOUNT + 1;</div><div class="line">    UPDATE TB_USER SET SALARY = SALARY + INCREAMENTMONEY WHERE NO = UNO;</div><div class="line">  END LOOP;</div><div class="line">  CLOSE CUR_USER;</div><div class="line">  DBMS_OUTPUT.PUT_LINE('TOTALCOUNT:'||TOTALCOUNT||'      TOTALMONEY:'||TOTALMONEY);</div><div class="line">  COMMIT;</div><div class="line">END;</div></pre></td></tr></table></figure>
<p><img src="http://img.blog.csdn.net/20161122123928026" alt="这里写图片描述"></p>
<h3 id="9-3-按部门统计员工工资区间和部门总工资"><a href="#9-3-按部门统计员工工资区间和部门总工资" class="headerlink" title="9.3 按部门统计员工工资区间和部门总工资"></a>9.3 按部门统计员工工资区间和部门总工资</h3><p>创建部门表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">create</span>  <span class="keyword">table</span> tb_dept(</div><div class="line">deptno <span class="built_in">number</span>,</div><div class="line"><span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">200</span>),</div><div class="line">location <span class="built_in">varchar</span>(<span class="number">200</span>)</div><div class="line">);</div></pre></td></tr></table></figure>
<p>插入数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> TB_DEPT(DEPTNO,<span class="keyword">NAME</span>,LOCATION) <span class="keyword">values</span>(<span class="number">10</span>,<span class="string">'会计部门'</span>,<span class="string">'北京'</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> TB_DEPT(DEPTNO,<span class="keyword">NAME</span>,LOCATION) <span class="keyword">values</span>(<span class="number">20</span>,<span class="string">'人力部门'</span>,<span class="string">'上海'</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> TB_DEPT(DEPTNO,<span class="keyword">NAME</span>,LOCATION) <span class="keyword">values</span>(<span class="number">30</span>,<span class="string">'研发部门'</span>,<span class="string">'广州'</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> TB_DEPT(DEPTNO,<span class="keyword">NAME</span>,LOCATION) <span class="keyword">values</span>(<span class="number">40</span>,<span class="string">'销售部门'</span>,<span class="string">'深圳'</span>);</div></pre></td></tr></table></figure>
<p>创建统计结果表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb_msg</div><div class="line">(</div><div class="line">  deptno <span class="built_in">number</span>,</div><div class="line">  count1 <span class="built_in">number</span>,</div><div class="line">  count2 <span class="built_in">number</span>,</div><div class="line">  count3 <span class="built_in">number</span>,</div><div class="line">  saltotal <span class="built_in">number</span></div><div class="line">);</div></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">DECLARE</div><div class="line">CURSOR CUR_DEPT IS SELECT DEPTNO FROM TB_DEPT;</div><div class="line">CURSOR CUR_USER(DNO NUMBER) IS SELECT * FROM TB_USER WHERE DEPTNO = DNO;</div><div class="line">DEPTNO TB_DEPT.DEPTNO%TYPE;</div><div class="line">USER TB_USER%ROWTYPE;</div><div class="line">COUNT1 NUMBER := 0;</div><div class="line">COUNT2 NUMBER := 0;</div><div class="line">COUNT3 NUMBER := 0;</div><div class="line">DEPT_TOTAL_SALARY NUMBER := 0;</div><div class="line"></div><div class="line">BEGIN</div><div class="line">  OPEN CUR_DEPT;</div><div class="line"></div><div class="line"></div><div class="line">  LOOP</div><div class="line">    FETCH CUR_DEPT INTO DEPTNO;</div><div class="line">    EXIT WHEN CUR_DEPT%NOTFOUND;</div><div class="line">    COUNT1 := 0;</div><div class="line">    COUNT2 := 0;</div><div class="line">    COUNT3 := 0;</div><div class="line">    DEPT_TOTAL_SALARY := 0;</div><div class="line">    OPEN CUR_USER(DEPTNO);</div><div class="line">    LOOP</div><div class="line"></div><div class="line">      FETCH CUR_USER INTO USER;</div><div class="line">      EXIT WHEN CUR_USER%NOTFOUND;</div><div class="line">      DEPT_TOTAL_SALARY := DEPT_TOTAL_SALARY + USER.SALARY;</div><div class="line"></div><div class="line">      IF USER.SALARY &lt;= 3000 THEN COUNT1 := COUNT1 + 1;</div><div class="line">      ELSIF USER.SALARY &lt;= 6000 THEN COUNT2 := COUNT2 + 1;</div><div class="line">      ELSE COUNT3 := COUNT3 + 1;</div><div class="line">      END IF;</div><div class="line">    END LOOP;</div><div class="line">    CLOSE CUR_USER;</div><div class="line">    DBMS_OUTPUT.PUT_LINE('DEPTNO='||DEPTNO||' DEPT_TOTAL_SALARY='||DEPT_TOTAL_SALARY ||'  COUNT1='||COUNT1||'   COUNT2='||COUNT2||'   COUNT3='||COUNT3);</div><div class="line">    INSERT INTO TB_MSG(DEPTNO,COUNT1,COUNT2,COUNT3,SALTOTAL) VALUES(DEPTNO,COUNT1,COUNT2,COUNT3,NVL(DEPT_TOTAL_SALARY,0));</div><div class="line">  END LOOP;</div><div class="line"></div><div class="line"></div><div class="line">  CLOSE CUR_DEPT;</div><div class="line">  COMMIT; </div><div class="line">END;</div></pre></td></tr></table></figure>
<p><img src="http://img.blog.csdn.net/20161122124011608" alt="这里写图片描述"></p>
<h3 id="9-4按系名分段统计成绩-85-大学物理课程各个分数段的学生人数，以及各系学生的平均成绩。"><a href="#9-4按系名分段统计成绩-85-大学物理课程各个分数段的学生人数，以及各系学生的平均成绩。" class="headerlink" title="9.4按系名分段统计成绩(85) 大学物理课程各个分数段的学生人数，以及各系学生的平均成绩。"></a>9.4按系名分段统计成绩(<60,60~85,>85) 大学物理课程各个分数段的学生人数，以及各系学生的平均成绩。</60,60~85,></h3><p>各个表的创建和数据插入sql</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">drop</span> <span class="keyword">table</span> sc;</div><div class="line"><span class="keyword">drop</span> <span class="keyword">table</span> course;</div><div class="line"><span class="keyword">drop</span> <span class="keyword">table</span> student;</div><div class="line"><span class="keyword">drop</span> <span class="keyword">table</span> teacher;</div><div class="line"><span class="keyword">drop</span> <span class="keyword">table</span> dep;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> DEP</div><div class="line">       (DNO <span class="built_in">NUMBER</span>(<span class="number">2</span>),</div><div class="line">        DNAME VARCHAR2(<span class="number">30</span>),</div><div class="line">        DIRECTOR <span class="built_in">NUMBER</span>(<span class="number">4</span>),</div><div class="line">        TEL   VARCHAR2(<span class="number">8</span>));</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> TEACHER</div><div class="line">       (TNO <span class="built_in">NUMBER</span>(<span class="number">4</span>),</div><div class="line">        TNAME VARCHAR2(<span class="number">10</span>),</div><div class="line">        TITLE VARCHAR2(<span class="number">20</span>),</div><div class="line">        HIREDATE <span class="built_in">DATE</span>,</div><div class="line">        SAL <span class="built_in">NUMBER</span>(<span class="number">7</span>,<span class="number">2</span>),</div><div class="line">        BONUS  <span class="built_in">NUMBER</span>(<span class="number">7</span>,<span class="number">2</span>),</div><div class="line">    MGR <span class="built_in">NUMBER</span>(<span class="number">4</span>),             </div><div class="line">        DEPTNO <span class="built_in">NUMBER</span>(<span class="number">2</span>));</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student</div><div class="line">       (sno <span class="built_in">NUMBER</span>(<span class="number">6</span>),</div><div class="line">        sname VARCHAR2(<span class="number">8</span>),</div><div class="line">        sex VARCHAR2(<span class="number">2</span>),</div><div class="line">        birth   <span class="built_in">DATE</span>,</div><div class="line">        passwd  VARCHAR2(<span class="number">8</span>),</div><div class="line">        dno  <span class="built_in">NUMBER</span>(<span class="number">2</span>));</div><div class="line">        </div><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> course</div><div class="line">       (cno VARCHAR2(<span class="number">8</span>),</div><div class="line">        cname VARCHAR2(<span class="number">20</span>),</div><div class="line">        credit <span class="built_in">NUMBER</span>(<span class="number">1</span>),</div><div class="line">        ctime  <span class="built_in">NUMBER</span>(<span class="number">2</span>),</div><div class="line">        <span class="keyword">quota</span>  <span class="built_in">NUMBER</span>(<span class="number">3</span>));</div><div class="line">        </div><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> sc</div><div class="line">       (sno <span class="built_in">NUMBER</span>(<span class="number">6</span>),</div><div class="line">        cno  VARCHAR2(<span class="number">8</span>),</div><div class="line">        grade <span class="built_in">NUMBER</span>(<span class="number">3</span>));        </div><div class="line">        </div><div class="line"><span class="keyword">alter</span> <span class="keyword">table</span> dep <span class="keyword">add</span> (<span class="keyword">constraint</span> pk_deptno primary <span class="keyword">key</span>(dno));</div><div class="line"><span class="keyword">alter</span> <span class="keyword">table</span> dep <span class="keyword">add</span>(<span class="keyword">constraint</span> dno_number_check <span class="keyword">check</span>(dno&gt;=<span class="number">10</span> <span class="keyword">and</span> dno&lt;=<span class="number">50</span>));</div><div class="line"><span class="keyword">alter</span> <span class="keyword">table</span> dep <span class="keyword">modify</span>(tel <span class="keyword">default</span> <span class="number">62795032</span>);</div><div class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">add</span> (<span class="keyword">constraint</span> pk_sno primary <span class="keyword">key</span>(sno));</div><div class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">add</span>(<span class="keyword">constraint</span> sex_check <span class="keyword">check</span>(sex=<span class="string">'男'</span> <span class="keyword">or</span> sex=<span class="string">'女'</span>));</div><div class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">modify</span>(birth <span class="keyword">default</span> <span class="keyword">sysdate</span>);</div><div class="line"><span class="keyword">alter</span> <span class="keyword">table</span> course <span class="keyword">add</span> (<span class="keyword">constraint</span> pk_cno primary <span class="keyword">key</span>(cno));</div><div class="line"><span class="keyword">alter</span> <span class="keyword">table</span> sc <span class="keyword">add</span> (<span class="keyword">constraint</span> pk_key primary <span class="keyword">key</span>(cno,sno));</div><div class="line"><span class="keyword">alter</span> <span class="keyword">table</span> teacher <span class="keyword">add</span> (<span class="keyword">constraint</span> pk_tno primary <span class="keyword">key</span>(tno));</div><div class="line"><span class="keyword">alter</span> <span class="keyword">table</span> sc <span class="keyword">add</span> (FOREIGN <span class="keyword">KEY</span>(cno) <span class="keyword">REFERENCES</span> course(cno));</div><div class="line"><span class="keyword">alter</span> <span class="keyword">table</span> sc <span class="keyword">add</span> (FOREIGN <span class="keyword">KEY</span>(sno) <span class="keyword">REFERENCES</span> student(sno));</div><div class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">add</span> (FOREIGN <span class="keyword">KEY</span>(dno) <span class="keyword">REFERENCES</span> dep(dno));</div><div class="line"><span class="keyword">alter</span> <span class="keyword">table</span> teacher <span class="keyword">add</span> (FOREIGN <span class="keyword">KEY</span>(deptno) <span class="keyword">REFERENCES</span> dep(dno));  </div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> DEP <span class="keyword">VALUES</span> (<span class="number">10</span>, <span class="string">'计算机系'</span>, <span class="number">9469</span> , <span class="string">'62785234'</span>);</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> DEP <span class="keyword">VALUES</span> (<span class="number">20</span>,<span class="string">'自动化系'</span>, <span class="number">9581</span> , <span class="string">'62775234'</span>);</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> DEP <span class="keyword">VALUES</span> (<span class="number">30</span>,<span class="string">'无线电系'</span>, <span class="number">9791</span> , <span class="string">'62778932'</span>);</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> DEP <span class="keyword">VALUES</span> (<span class="number">40</span>,<span class="string">'信息管理系'</span>, <span class="number">9611</span>, <span class="string">'62785520'</span>);</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> DEP <span class="keyword">VALUES</span> (<span class="number">50</span>,<span class="string">'微纳电子系'</span>, <span class="number">2031</span>, <span class="string">'62797686'</span>);</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> TEACHER <span class="keyword">VALUES</span>(<span class="number">9468</span>,<span class="string">'CHARLES'</span>,<span class="string">'PROFESSOR'</span>,<span class="string">'17-12月-2004'</span>,<span class="number">8000</span>,<span class="number">1000</span>,<span class="literal">NULL</span>,<span class="number">10</span>);</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> TEACHER <span class="keyword">VALUES</span>(<span class="number">9469</span>,<span class="string">'SMITH'</span>,<span class="string">'PROFESSOR'</span>,<span class="string">'17-12月-2004'</span>,<span class="number">5000</span>,<span class="number">1000</span> ,<span class="number">9468</span>,<span class="number">10</span>);</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> TEACHER <span class="keyword">VALUES</span>(<span class="number">9470</span>,<span class="string">'ALLEN'</span>,<span class="string">'ASSOCIATE PROFESSOR'</span>, <span class="string">'20-2月-2003'</span>,<span class="number">4200</span>,<span class="number">500</span>,<span class="number">9469</span>,<span class="number">10</span>);</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> TEACHER <span class="keyword">VALUES</span>(<span class="number">9471</span>,<span class="string">'WARD'</span>,<span class="string">'LECTURER'</span>, <span class="string">'22-2月-2004'</span>,<span class="number">3000</span>,<span class="number">300</span>,<span class="number">9469</span>,<span class="number">10</span>);</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> TEACHER <span class="keyword">VALUES</span>(<span class="number">9581</span>,<span class="string">'JONES'</span>,<span class="string">'PROFESSOR '</span>, <span class="string">'2-4月-2003'</span>,<span class="number">6500</span>,<span class="number">1000</span>,<span class="number">9468</span>,<span class="number">20</span>);</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> TEACHER <span class="keyword">VALUES</span>(<span class="number">9582</span>,<span class="string">'MARTIN'</span>,<span class="string">'ASSOCIATE PROFESSOR '</span>,<span class="string">'28-9月-2005'</span>,<span class="number">4000</span>,<span class="number">800</span>,<span class="number">9581</span>,<span class="number">20</span>);</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> TEACHER <span class="keyword">VALUES</span>(<span class="number">9583</span>,<span class="string">'BLAKE'</span>,<span class="string">'LECTURER '</span>,<span class="string">'1-5月-2006'</span>,<span class="number">3000</span>,<span class="number">300</span>,<span class="number">9581</span>,<span class="number">20</span>);</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> TEACHER <span class="keyword">VALUES</span>(<span class="number">9791</span>,<span class="string">'CLARK'</span>,<span class="string">'PROFESSO'</span>, <span class="string">'9-6月-2003'</span>,<span class="number">5500</span>,<span class="literal">NULL</span>,<span class="number">9468</span>,<span class="number">30</span>);</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> TEACHER <span class="keyword">VALUES</span>(<span class="number">9792</span>,<span class="string">'SCOTT'</span>,<span class="string">'ASSOCIATE PROFESSOR '</span>,<span class="string">'09-12月-2004'</span>,<span class="number">4500</span>,<span class="literal">NULL</span>,<span class="number">9791</span>,<span class="number">30</span>);</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> TEACHER <span class="keyword">VALUES</span>(<span class="number">9793</span>,<span class="string">'BAGGY'</span>,<span class="string">'LECTURER'</span>,<span class="string">'17-11月-2004'</span>,<span class="number">3000</span>,<span class="literal">NULL</span>,<span class="number">9791</span>,<span class="number">30</span>);</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> TEACHER <span class="keyword">VALUES</span>(<span class="number">9611</span>,<span class="string">'TURNER'</span>,<span class="string">'PROFESSOR '</span>,<span class="string">'8-9月-2005'</span>,<span class="number">6000</span>,<span class="number">1000</span>,<span class="number">9468</span>,<span class="number">40</span>);</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> TEACHER <span class="keyword">VALUES</span>(<span class="number">9612</span>,<span class="string">'ADAMS'</span>,<span class="string">'ASSOCIATE PROFESSO'</span>,<span class="string">'12-1月-2004'</span>,<span class="number">4800</span>,<span class="number">800</span>,<span class="number">9611</span>,<span class="number">40</span>);</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> TEACHER <span class="keyword">VALUES</span>(<span class="number">9613</span>,<span class="string">'JAMES'</span>,<span class="string">'LECTURER'</span>,<span class="string">'3-12月-2006'</span>,<span class="number">2800</span>,<span class="number">200</span>,<span class="number">9611</span>,<span class="number">40</span>);</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> TEACHER <span class="keyword">VALUES</span>(<span class="number">2031</span>,<span class="string">'FORD'</span>,<span class="string">'PROFESSOR'</span>,<span class="string">'3-12月-2005'</span>,<span class="number">5500</span>,<span class="literal">NULL</span>,<span class="number">9468</span>,<span class="number">50</span>);</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> TEACHER <span class="keyword">VALUES</span>(<span class="number">2032</span>,<span class="string">'MILLER'</span>,<span class="string">'ASSOCIATE PROFESSO'</span>,<span class="string">'23-1月-2005'</span>,<span class="number">4300</span>,<span class="literal">NULL</span>,<span class="number">2031</span>,<span class="number">50</span>);</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> TEACHER <span class="keyword">VALUES</span>(<span class="number">2033</span>,<span class="string">'MIGEAL'</span>,<span class="string">'LECTURER'</span>,<span class="string">'23-1月-2006'</span>,<span class="number">2900</span>,<span class="literal">NULL</span>,<span class="number">2031</span>,<span class="number">50</span>);</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> TEACHER <span class="keyword">VALUES</span>(<span class="number">2034</span>,<span class="string">'PEGGY'</span>, <span class="string">'LECTURER'</span>, <span class="string">'23-1月-2007'</span>,<span class="number">2500</span>,<span class="literal">NULL</span>,<span class="number">2031</span>,<span class="number">50</span>);</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'01-8月 -10'</span>,<span class="number">1</span>,<span class="string">'John'</span>,<span class="string">'男'</span>,<span class="string">'123456'</span>,<span class="number">10</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'02-8月 -10'</span>,<span class="number">2</span>,<span class="string">'Jacob'</span>,<span class="string">'男'</span>,<span class="string">'123456'</span>,<span class="number">10</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'03-8月 -10'</span>,<span class="number">3</span>,<span class="string">'Michael'</span>,<span class="string">'男'</span>,<span class="string">'123456'</span>,<span class="number">10</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'04-8月 -10'</span>,<span class="number">4</span>,<span class="string">'Joshua'</span>,<span class="string">'男'</span>,<span class="string">'123456'</span>,<span class="number">10</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'05-8月 -10'</span>,<span class="number">5</span>,<span class="string">'Ethan'</span>,<span class="string">'男'</span>,<span class="string">'123456'</span>,<span class="number">10</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'06-8月 -10'</span>,<span class="number">6</span>,<span class="string">'Matthew'</span>,<span class="string">'男'</span>,<span class="string">'123456'</span>,<span class="number">20</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'07-8月 -10'</span>,<span class="number">7</span>,<span class="string">'Daniel'</span>,<span class="string">'男'</span>,<span class="string">'123456'</span>,<span class="number">20</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'08-8月 -10'</span>,<span class="number">8</span>,<span class="string">'Chris'</span>,<span class="string">'男'</span>,<span class="string">'123456'</span>,<span class="number">20</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'09-8月 -10'</span>,<span class="number">9</span>,<span class="string">'Andrew'</span>,<span class="string">'男'</span>,<span class="string">'123456'</span>,<span class="number">30</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'10-8月 -10'</span>,<span class="number">10</span>,<span class="string">'Anthony'</span>,<span class="string">'男'</span>,<span class="string">'123456'</span>,<span class="number">30</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'11-8月 -10'</span>,<span class="number">11</span>,<span class="string">'William'</span>,<span class="string">'男'</span>,<span class="string">'123456'</span>,<span class="number">30</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'12-8月 -10'</span>,<span class="number">12</span>,<span class="string">'Joseph'</span>,<span class="string">'男'</span>,<span class="string">'123456'</span>,<span class="number">40</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'13-8月 -10'</span>,<span class="number">13</span>,<span class="string">'Alex'</span>,<span class="string">'男'</span>,<span class="string">'123456'</span>,<span class="number">40</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'14-8月 -10'</span>,<span class="number">14</span>,<span class="string">'David'</span>,<span class="string">'男'</span>,<span class="string">'123456'</span>,<span class="number">40</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'15-8月 -10'</span>,<span class="number">15</span>,<span class="string">'Ryan'</span>,<span class="string">'男'</span>,<span class="string">'123456'</span>,<span class="number">40</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'16-8月 -10'</span>,<span class="number">16</span>,<span class="string">'Noah'</span>,<span class="string">'男'</span>,<span class="string">'123456'</span>,<span class="number">40</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'17-8月 -10'</span>,<span class="number">17</span>,<span class="string">'James'</span>,<span class="string">'男'</span>,<span class="string">'123456'</span>,<span class="number">40</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'18-8月 -10'</span>,<span class="number">18</span>,<span class="string">'Nicholas'</span>,<span class="string">'男'</span>,<span class="string">'123456'</span>,<span class="number">50</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'19-8月 -10'</span>,<span class="number">19</span>,<span class="string">'Tyler'</span>,<span class="string">'男'</span>,<span class="string">'123456'</span>,<span class="number">50</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'20-8月 -10'</span>,<span class="number">20</span>,<span class="string">'Logan'</span>,<span class="string">'男'</span>,<span class="string">'123456'</span>,<span class="number">50</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'21-8月 -10'</span>,<span class="number">21</span>,<span class="string">'Emily'</span>,<span class="string">'女'</span>,<span class="string">'123456'</span>,<span class="number">10</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'22-8月 -10'</span>,<span class="number">22</span>,<span class="string">'Emma'</span>,<span class="string">'女'</span>,<span class="string">'123456'</span>,<span class="number">10</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'23-8月 -10'</span>,<span class="number">23</span>,<span class="string">'Madis'</span>,<span class="string">'女'</span>,<span class="string">'123456'</span>,<span class="number">10</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'24-8月 -10'</span>,<span class="number">24</span>,<span class="string">'Isabe'</span>,<span class="string">'女'</span>,<span class="string">'123456'</span>,<span class="number">10</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'25-8月 -10'</span>,<span class="number">25</span>,<span class="string">'Ava'</span>,<span class="string">'女'</span>,<span class="string">'123456'</span>,<span class="number">10</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'26-8月 -10'</span>,<span class="number">26</span>,<span class="string">'Abigail'</span>,<span class="string">'女'</span>,<span class="string">'123456'</span>,<span class="number">20</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'27-8月 -10'</span>,<span class="number">27</span>,<span class="string">'Olivia'</span>,<span class="string">'女'</span>,<span class="string">'123456'</span>,<span class="number">20</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'28-8月 -10'</span>,<span class="number">28</span>,<span class="string">'Hannah'</span>,<span class="string">'女'</span>,<span class="string">'123456'</span>,<span class="number">20</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'29-8月 -10'</span>,<span class="number">29</span>,<span class="string">'Sophia'</span>,<span class="string">'女'</span>,<span class="string">'123456'</span>,<span class="number">30</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'30-8月 -10'</span>,<span class="number">30</span>,<span class="string">'Samant'</span>,<span class="string">'女'</span>,<span class="string">'123456'</span>,<span class="number">30</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'31-8月 -10'</span>,<span class="number">31</span>,<span class="string">'Elizab'</span>,<span class="string">'女'</span>,<span class="string">'123456'</span>,<span class="number">30</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'01-7月 -10'</span>,<span class="number">32</span>,<span class="string">'Ashley'</span>,<span class="string">'女'</span>,<span class="string">'123456'</span>,<span class="number">40</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'02-7月 -10'</span>,<span class="number">33</span>,<span class="string">'Mia'</span>,<span class="string">'女'</span>,<span class="string">'123456'</span>,<span class="number">40</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'11-8月 -10'</span>,<span class="number">34</span>,<span class="string">'Alexis'</span>,<span class="string">'女'</span>,<span class="string">'123456'</span>,<span class="number">40</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'12-8月 -10'</span>,<span class="number">35</span>,<span class="string">'Sarah'</span>,<span class="string">'女'</span>,<span class="string">'123456'</span>,<span class="number">40</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'13-8月 -10'</span>,<span class="number">36</span>,<span class="string">'Natalie'</span>,<span class="string">'女'</span>,<span class="string">'123456'</span>,<span class="number">40</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'14-8月 -10'</span>,<span class="number">37</span>,<span class="string">'Grace'</span>,<span class="string">'女'</span>,<span class="string">'123456'</span>,<span class="number">40</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'15-8月 -10'</span>,<span class="number">38</span>,<span class="string">'Chloe'</span>,<span class="string">'女'</span>,<span class="string">'123456'</span>,<span class="number">50</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'16-8月 -10'</span>,<span class="number">39</span>,<span class="string">'Alyssa'</span>,<span class="string">'女'</span>,<span class="string">'123456'</span>,<span class="number">50</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(birth,sno,sname,sex,passwd,dno) <span class="keyword">values</span>(<span class="string">'17-8月 -10'</span>,<span class="number">40</span>,<span class="string">'Brianna'</span>,<span class="string">'女'</span>,<span class="string">'123456'</span>,<span class="number">50</span>);         </div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> course <span class="keyword">values</span>(<span class="string">'c001'</span>,<span class="string">'数据结构'</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">100</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> course <span class="keyword">values</span>(<span class="string">'c002'</span>,<span class="string">'Java语言'</span>,<span class="number">2</span>,<span class="number">20</span>,<span class="number">100</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> course <span class="keyword">values</span>(<span class="string">'c003'</span>,<span class="string">'数字电路'</span>,<span class="number">3</span>,<span class="number">30</span>,<span class="number">100</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> course <span class="keyword">values</span>(<span class="string">'c004'</span>,<span class="string">'模拟电路'</span>,<span class="number">3</span>,<span class="number">40</span>,<span class="number">100</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> course <span class="keyword">values</span>(<span class="string">'c005'</span>,<span class="string">'信号与系统'</span>,<span class="number">4</span>,<span class="number">50</span>,<span class="number">100</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> course <span class="keyword">values</span>(<span class="string">'c006'</span>,<span class="string">'C语言'</span>,<span class="number">3</span>,<span class="number">60</span>,<span class="number">100</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> course <span class="keyword">values</span>(<span class="string">'c007'</span>,<span class="string">'高等数学'</span>,<span class="number">5</span>,<span class="number">70</span>,<span class="number">100</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> course <span class="keyword">values</span>(<span class="string">'c008'</span>,<span class="string">'自动原理'</span>,<span class="number">1</span>,<span class="number">80</span>,<span class="number">100</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> course <span class="keyword">values</span>(<span class="string">'c009'</span>,<span class="string">'数理方程'</span>,<span class="number">3</span>,<span class="number">90</span>,<span class="number">100</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> course <span class="keyword">values</span>(<span class="string">'c010'</span>,<span class="string">'大学语文'</span>,<span class="number">2</span>,<span class="number">61</span>,<span class="number">100</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> course <span class="keyword">values</span>(<span class="string">'c011'</span>,<span class="string">'机械制图'</span>,<span class="number">3</span>,<span class="number">52</span>,<span class="number">100</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> course <span class="keyword">values</span>(<span class="string">'c012'</span>,<span class="string">'微机原理'</span>,<span class="number">3</span>,<span class="number">43</span>,<span class="number">100</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> course <span class="keyword">values</span>(<span class="string">'c013'</span>,<span class="string">'通信基础'</span>,<span class="number">3</span>,<span class="number">74</span>,<span class="number">100</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> course <span class="keyword">values</span>(<span class="string">'c014'</span>,<span class="string">'计算机原理'</span>,<span class="number">5</span>,<span class="number">35</span>,<span class="number">100</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> course <span class="keyword">values</span>(<span class="string">'c015'</span>,<span class="string">'数据库'</span>,<span class="number">3</span>,<span class="number">86</span>,<span class="number">100</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> course <span class="keyword">values</span>(<span class="string">'c016'</span>,<span class="string">'编译原理'</span>,<span class="number">2</span>,<span class="number">97</span>,<span class="number">100</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> course <span class="keyword">values</span>(<span class="string">'c017'</span>,<span class="string">'大学物理'</span>,<span class="number">2</span>,<span class="number">38</span>,<span class="number">100</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> course <span class="keyword">values</span>(<span class="string">'c018'</span>,<span class="string">'统计基础'</span>,<span class="number">4</span>,<span class="number">50</span>,<span class="number">100</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> course <span class="keyword">values</span>(<span class="string">'c019'</span>,<span class="string">'线性代数'</span>,<span class="number">4</span>,<span class="number">70</span>,<span class="number">100</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> course <span class="keyword">values</span>(<span class="string">'c020'</span>,<span class="string">'Linux基础'</span>,<span class="number">3</span>,<span class="number">60</span>,<span class="number">100</span>);</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">6</span>,<span class="string">'c002'</span>,<span class="number">60</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">6</span>,<span class="string">'c015'</span>,<span class="number">60</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">6</span>,<span class="string">'c010'</span>,<span class="number">61</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">27</span>,<span class="string">'c010'</span>,<span class="number">65</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">6</span>,<span class="string">'c001'</span>,<span class="number">60</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">6</span>,<span class="string">'c011'</span>,<span class="number">61</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">6</span>,<span class="string">'c018'</span>,<span class="number">70</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">8</span>,<span class="string">'c007'</span>,<span class="number">65</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">27</span>,<span class="string">'c020'</span>,<span class="number">65</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">27</span>,<span class="string">'c015'</span>,<span class="number">65</span>);       </div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">26</span>,<span class="string">'c015'</span>,<span class="number">55</span>);   </div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">25</span>,<span class="string">'c015'</span>,<span class="number">59</span>);      </div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">'c017'</span>,<span class="number">65</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">'c017'</span>,<span class="number">66</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">'c017'</span>,<span class="number">67</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">4</span>,<span class="string">'c017'</span>,<span class="number">68</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">5</span>,<span class="string">'c017'</span>,<span class="number">69</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">6</span>,<span class="string">'c017'</span>,<span class="number">70</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">7</span>,<span class="string">'c017'</span>,<span class="number">71</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">8</span>,<span class="string">'c017'</span>,<span class="number">72</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">9</span>,<span class="string">'c017'</span>,<span class="number">73</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">10</span>,<span class="string">'c017'</span>,<span class="number">74</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">11</span>,<span class="string">'c017'</span>,<span class="number">75</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">12</span>,<span class="string">'c017'</span>,<span class="number">76</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">13</span>,<span class="string">'c017'</span>,<span class="number">77</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">14</span>,<span class="string">'c017'</span>,<span class="number">78</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">15</span>,<span class="string">'c017'</span>,<span class="number">79</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">16</span>,<span class="string">'c017'</span>,<span class="number">80</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">17</span>,<span class="string">'c017'</span>,<span class="number">81</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">18</span>,<span class="string">'c017'</span>,<span class="number">82</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">19</span>,<span class="string">'c017'</span>,<span class="number">83</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">20</span>,<span class="string">'c017'</span>,<span class="number">84</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">21</span>,<span class="string">'c017'</span>,<span class="number">85</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">22</span>,<span class="string">'c017'</span>,<span class="number">86</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">23</span>,<span class="string">'c017'</span>,<span class="number">87</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">24</span>,<span class="string">'c017'</span>,<span class="number">88</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">25</span>,<span class="string">'c017'</span>,<span class="number">89</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">26</span>,<span class="string">'c017'</span>,<span class="number">90</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">27</span>,<span class="string">'c017'</span>,<span class="number">89</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">28</span>,<span class="string">'c017'</span>,<span class="number">88</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">29</span>,<span class="string">'c017'</span>,<span class="number">87</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">30</span>,<span class="string">'c017'</span>,<span class="number">86</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">31</span>,<span class="string">'c017'</span>,<span class="number">85</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">32</span>,<span class="string">'c017'</span>,<span class="number">84</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">33</span>,<span class="string">'c017'</span>,<span class="number">83</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">34</span>,<span class="string">'c017'</span>,<span class="number">82</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">35</span>,<span class="string">'c017'</span>,<span class="number">81</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">36</span>,<span class="string">'c017'</span>,<span class="number">80</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">37</span>,<span class="string">'c017'</span>,<span class="number">79</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">38</span>,<span class="string">'c017'</span>,<span class="number">78</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">39</span>,<span class="string">'c017'</span>,<span class="number">77</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc <span class="keyword">values</span>(<span class="number">40</span>,<span class="string">'c017'</span>,<span class="number">76</span>);</div><div class="line"><span class="keyword">commit</span>;</div></pre></td></tr></table></figure>
<p>PL/SQL程序</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line">DECLARE</div><div class="line">CURSOR CUR_COURSE IS SELECT * FROM COURSE;</div><div class="line">COS COURSE%ROWTYPE;</div><div class="line"></div><div class="line">CURSOR CUR_DEPT IS SELECT DNO,DNAME FROM DEP;</div><div class="line">DEPART_NO DEP.DNO%TYPE;</div><div class="line">DEPART_DNAME DEP.DNAME%TYPE;</div><div class="line"></div><div class="line">--CURSOR CUR_SC(DEPART_NO DEP.DNO%TYPE,COURSE_NO COURSE.CNO%TYPE) IS SELECT * FROM SC WHERE SNO IN (SELECT SNO FROM STUDENT WHERE DNO = DEPART_NO) AND CNO = COURSE_NO;</div><div class="line">CURSOR CUR_SC(DEPART_NO DEP.DNO%TYPE,COURSE_NAME COURSE.CNAME%TYPE) IS SELECT * FROM SC WHERE CNO=(SELECT CNO FROM COURSE WHERE CNAME = COURSE_NAME)</div><div class="line">                                                                                        AND   SNO IN (SELECT SNO FROM STUDENT WHERE DNO = DEPART_NO);</div><div class="line">S_C SC%ROWTYPE;</div><div class="line"></div><div class="line">COUNT1 NUMBER := 0;</div><div class="line">COUNT2 NUMBER := 0;</div><div class="line">COUNT3 NUMBER := 0;</div><div class="line">AVGGRADE NUMBER := 0;</div><div class="line">COURSE_DEPT_TOTAL_GRADE NUMBER := 0;</div><div class="line">BEGIN</div><div class="line">OPEN CUR_COURSE;</div><div class="line">LOOP</div><div class="line">  FETCH CUR_COURSE INTO COS;</div><div class="line">  EXIT WHEN CUR_COURSE%NOTFOUND;</div><div class="line"></div><div class="line">  OPEN CUR_DEPT;</div><div class="line">  LOOP</div><div class="line">    FETCH CUR_DEPT INTO DEPART_NO,DEPART_DNAME;</div><div class="line">    EXIT WHEN CUR_DEPT%NOTFOUND;</div><div class="line"></div><div class="line">    OPEN CUR_SC(DEPART_NO,COS.CNAME);</div><div class="line">    COUNT1 := 0;</div><div class="line">    COUNT2 := 0;</div><div class="line">    COUNT3 := 0;</div><div class="line">    COURSE_DEPT_TOTAL_GRADE := 0;</div><div class="line">    AVGGRADE := 0;</div><div class="line">    SELECT AVG(GRADE) INTO AVGGRADE FROM SC WHERE CNO = (SELECT CNO FROM COURSE WHERE CNAME = COS.CNAME) AND SNO IN (SELECT SNO FROM STUDENT WHERE DNO = DEPART_NO);</div><div class="line">    LOOP</div><div class="line">      FETCH CUR_SC INTO S_C;</div><div class="line">      EXIT WHEN CUR_SC%NOTFOUND;</div><div class="line">      IF S_C.GRADE &lt; 60 THEN COUNT1 := COUNT1 + 1;</div><div class="line">      ELSIF S_C.GRADE &lt;85 THEN COUNT2 := COUNT2 + 1;</div><div class="line">      ELSE COUNT3 := COUNT3 + 1;</div><div class="line">      END IF;</div><div class="line">      COURSE_DEPT_TOTAL_GRADE := COURSE_DEPT_TOTAL_GRADE + S_C.GRADE;</div><div class="line">    END LOOP;</div><div class="line">    CLOSE CUR_SC;</div><div class="line">--    IF COUNT1 + COUNT2 + COUNT3 = 0 THEN AVGGRADE := 0;</div><div class="line">--    ELSE AVGGRADE := COURSE_DEPT_TOTAL_GRADE/(COUNT1+COUNT2+COUNT3);</div><div class="line">--    END IF;</div><div class="line">--    INSERT INTO TB_SCORREMSG(CNAME,DNAME,COUNT1,COUNT2,COUNT3,AVGSCORE) VALUES(COS.CNAME,DEPART_DNAME,COUNT1,COUNT2,COUNT3,AVGGRADE);</div><div class="line">    DBMS_OUTPUT.PUT_LINE('课程：'||COS.CNAME||'  系名：'||DEPART_DNAME||'   低于60分：'||COUNT1||'  60~85分：'||COUNT2||'  85分以上:'||COUNT3||'  系总分 ：'||COURSE_DEPT_TOTAL_GRADE||'   平均分:'||AVGGRADE);</div><div class="line"></div><div class="line">  END LOOP;</div><div class="line">  CLOSE CUR_DEPT;</div><div class="line">END LOOP;</div><div class="line"></div><div class="line">CLOSE CUR_COURSE;</div><div class="line">COMMIT;</div><div class="line">END;</div></pre></td></tr></table></figure>
<p><img src="http://img.blog.csdn.net/20161122124151155" alt="这里写图片描述"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/10/Oracle/PLSQL快速入门/" data-id="cj27jtjqg000sa7fydsx8udkc" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Oracle/">Oracle</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/03/10/PythonWeb/Django静态文件问题/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Django1.10静态文件不能成功读取解决方案
        
      </div>
    </a>
  
  
    <a href="/2017/03/10/Oracle/存储过程/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">数据库编程入门(二)-存储过程和存储函数</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hadoop/">Hadoop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/">JVM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaWeb/">JavaWeb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java基础/">Java基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java爬虫/">Java爬虫</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mac工具/">Mac工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nosql/">Nosql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Oracle/">Oracle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PythonWeb/">PythonWeb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python基础/">Python基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/">Redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/">Spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/剑指Offer/">剑指Offer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/剑指offer/">剑指offer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/多线程/">多线程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/大数据/">大数据</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/大数据基础/">大数据基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工具/">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/搜索/">搜索</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/爬虫/">爬虫</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/面经/">面经</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/高并发/">高并发</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/Hadoop/" style="font-size: 11.43px;">Hadoop</a> <a href="/tags/JVM/" style="font-size: 10px;">JVM</a> <a href="/tags/JavaWeb/" style="font-size: 20px;">JavaWeb</a> <a href="/tags/Java基础/" style="font-size: 15.71px;">Java基础</a> <a href="/tags/Java爬虫/" style="font-size: 10px;">Java爬虫</a> <a href="/tags/Linux/" style="font-size: 11.43px;">Linux</a> <a href="/tags/Mac工具/" style="font-size: 12.86px;">Mac工具</a> <a href="/tags/Nosql/" style="font-size: 14.29px;">Nosql</a> <a href="/tags/Oracle/" style="font-size: 14.29px;">Oracle</a> <a href="/tags/PythonWeb/" style="font-size: 10px;">PythonWeb</a> <a href="/tags/Python基础/" style="font-size: 14.29px;">Python基础</a> <a href="/tags/Redis/" style="font-size: 14.29px;">Redis</a> <a href="/tags/Spring/" style="font-size: 18.57px;">Spring</a> <a href="/tags/剑指Offer/" style="font-size: 17.14px;">剑指Offer</a> <a href="/tags/剑指offer/" style="font-size: 10px;">剑指offer</a> <a href="/tags/多线程/" style="font-size: 10px;">多线程</a> <a href="/tags/大数据/" style="font-size: 12.86px;">大数据</a> <a href="/tags/大数据基础/" style="font-size: 12.86px;">大数据基础</a> <a href="/tags/工具/" style="font-size: 10px;">工具</a> <a href="/tags/搜索/" style="font-size: 12.86px;">搜索</a> <a href="/tags/爬虫/" style="font-size: 10px;">爬虫</a> <a href="/tags/面经/" style="font-size: 11.43px;">面经</a> <a href="/tags/高并发/" style="font-size: 14.29px;">高并发</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/05/02/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2017/05/02/大数据/Hadoop/Hadoop学习笔记（二）- HDFS详解/">Hadoop学习笔记（二） - HDFS详解</a>
          </li>
        
          <li>
            <a href="/2017/04/24/大数据/Hadoop/Hadoop学习笔记（一）- Hadoop快速入门/">Hadoop学习笔记（一）- Hadoop快速入门</a>
          </li>
        
          <li>
            <a href="/2017/04/19/Java基础/JVM/JVM学习笔记（基础知识）/">JVM学习笔记（基础知识）</a>
          </li>
        
          <li>
            <a href="/2017/04/18/大数据/大数据基础/Netty学习笔记（一）/">Netty学习笔记（一）</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>